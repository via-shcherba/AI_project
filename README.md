## Система микросервисов нейроагента

bot_service - модель на базе OpenAI
knowledge_base - сервис который создает векторое хранилище для bot_service
utility - библиотека сервисных методов
chat_engine - чат-виджет 
scheduler - планировщик заданий (обновляет базу знаний 1 раз в сутки и отчищает историю переписок пользователей каждый час (удаляются сообщения старше 24 часов))

## Запуск нейроагента
# База знаний (векторное хранилище)
knowledge_base - не запуститься без АПИ ключа от freshdesk и OpenAPI.
Ключи храняться в .env (который в гитигноре)
Требуются ключи:
FRESHDESK_API_KEY=""
OPENAI_API_KEY=""
EMBEDING_MODEL="text-embedding-3-large"
***Поэтому векторное хранилище уже приготовлено и добавлено в репозитории.

# Движок чата (chat_engine)
***Требует установленного Redis Redis Community Edition 7.4.1
Прежде всего нужно установить окружение с библиотеками в requirements.txt.
В файле chat_engine/custom_settings.py прописаны следующие порты:
1. MAIN_PORT = 8004 (Порт на котором работает движок чата)
2. REDIS_PORT = 6380 (Порт на котором храниться история чата в редис)
Переменная IS_LOCAL_RUN = True определяет что система будет запускаться 
на локальной машине.

В корневой папке лежит файл page.html для показа виджета в браузере.

Для работы чата с нейроагентом требуется .env файл в папке chat_engine
со следующими переменными:
OPENAI_API_KEY=""
GOOGLE_SE_ID=""
GOOGLE_API_KEY="" 

*** Чат можно запустить без GOOGLE_SE

Команда запуска python start_servers.py

# Sheduler
Обновляет базу знаний 1 раз в сутки и отчищает историю переписок пользователей каждый час (удаляются сообщения старше 24 часов)
Для запуска необходимо установить окружение и установить requirements.txt
В файле custom_settings.py прописан порт на котором работает планировщик, 
продолжительность жизни истории и данные от движка чата чтобы "передернуть" подгрузку 
обновленной базы знаний.

Команда запуска python start_servers.py

# Порядок запуска

1. Запустить движок сайта 
2. Запустить sheduler